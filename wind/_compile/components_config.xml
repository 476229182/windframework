<?xml version="1.0" encoding="UTF-8"?>

<!-- <component name='' path='' factory-method='' init-method='' scope="application/singleton/prototype/" 
	proxy=''> -->
<!-- <property property-name='' ref/value/path=''> -->
<!-- <constructor-arg ref/value=''> -->
<!-- <config resource=''> -->
<!-- </component> -->

<components>
	<!-- app -->
	<component name='windWebApp' path='WIND:core.web.WindWebApplication'
		scope='singleton'>
		<properties>
			<property name='dispatcher' ref='dispatcher' />
		</properties>
	</component>
	<component name='dispatcher' path='WIND:core.web.WindDispatcher'
		scope='prototype'>
		<properties>
			<property name='urlHelper' ref='urlHelper' />
		</properties>
	</component>
	<!-- forward -->
	<component name='forward' path='WIND:core.web.WindForward'
		scope='prototype'>
	</component>

	<!-- urlBasedRouter -->
	<component name='urlBasedRouter' path='COM:router.WindUrlBasedRouter'
		scope="prototype">
		<config>
			<module url-param='m' default-value='default' />
			<controller url-param='c' default-value='index' />
			<action url-param='a' default-value='run' />
		</config>
	</component>
	
	<component name='urlRewriteRouter' path='COM:router.WindUrlRewriteRouter' scope='singleton'>
		<config>
			<module url-param='m' default-value='default' />
			<controller url-param='c' default-value='index' />
			<action url-param='a' default-value='run' />
		    <!-- url格式配置项，mca可以根据需求进行格式组合，比如m/c/a,m/c-a但是组合用到的分割符需根据key-value-sep来使用 -->
			<url-pattern>m/c-a/*</url-pattern>
			<!-- url的后缀 -->
			<suffix>htm</suffix>
			<!-- 模块变量之间的分隔符 -->
			<separator>/</separator>
			<!-- 变量之间的key-value的分隔符，也可以是mca组合的时候使用的分隔符 -->
			<key-value-sep>-</key-value-sep>
			<!-- 对于数字下标数组是否添加前缀 -->
			<key-prefix>myvar_</key-prefix>
			<is-rewrite>1</is-rewrite>
		</config>
	</component>
	<component name='urlHelper' path='WIND:core.web.WindUrlHelper' scope='singleton'>
	</component>
	
	<!-- windView -->
	<component name='windView' init-method='init' path='COM:viewer.WindView'
		scope='prototype'>
		<config>
			<template-dir>template</template-dir>
			<template-ext>htm</template-ext>
			<compile-dir>compile.template</compile-dir>
			<is-cache>0</is-cache>
		</config>
		<properties>
			<property name='viewResolver' ref='viewResolver' />
			<property name='viewCache' ref='viewCache' />
		</properties>
	</component>
	<component name='viewResolver' path='COM:viewer.WindViewerResolver' scope='prototype'>
	</component>
	<component name='template' path='COM:viewer.compiler.WindViewTemplate'
		scope='prototype'>
		<config resource='' />
	</component>

	<!-- error -->
	<component name='errorMessage' path='WIND:core.web.WindErrorMessage'
		scope='prototype'></component>
	<component name='configParser' path='COM:parser.WindConfigParser'
		scope='singleton'>
	</component>
	<!-- cache -->
	<component name='windCache' path="COM:cache.strategy.WindFileCache">
		<config>
			<dir>compile</dir>
			<dbconfig-name>default</dbconfig-name>
			<!-- 缓存的表名 -->
			<table-name>cache</table-name>
			<!-- 缓存的key字段名称 -->
			<field-key>key</field-key>
			<!-- 缓存的value字段名称 -->
			<field-value>value</field-value>
			<!-- 缓存的过期时间字段名称 -->
			<field-expire>expire</field-expire>
		</config>
	</component>
	<component name='viewCache' path='COM:cache.strategy.WindFileCache'>
		<config>
			<dir>compile.cache</dir>
			<suffix>php</suffix>
			<expires>10</expires>
		</config>
	</component>

</components>
